<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/weblayout}"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title >Giỏ hàng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
</head>
<body layout:fragment="content">
<!-- breadcrumb area start -->
<!-- breadcrumb area start -->
<div class="breadcrumb-area">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumb-wrap">
                    <nav aria-label="breadcrumb">
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                            <li class="breadcrumb-item"><a href="shop-grid-left-sidebar.html">shop</a></li>
                            <li class="breadcrumb-item active" aria-current="page">cart</li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- breadcrumb area end -->

<div class="cart-main-wrapper">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <!-- Cart Table Area -->
                <div class="cart-table table-responsive">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th class="pro-thumbnail">Ảnh</th>
                            <th class="pro-title">Tên sản phẩm</th>
                            <th class="pro-rom">Bộ nhớ trong</th>
                            <th class="pro-color">Màu</th>
                            <th class="pro-price">Giá</th>
                            <th class="pro-quantity">Số lượng</th>
                            <th class="pro-subtotal">Tổng tiền</th>
                            <th class="pro-remove">Xóa</th>
                        </tr>
                        </thead>
                        <tbody>
                        <th:block th:each="cart : ${listCart}">
                            <tr>
                                <td class="pro-thumbnail"><a href="#"><img class="img-fluid" th:src="${cart.getImgProduct()}"
                                                                           alt="Product"/></a></td>
                                <td class="pro-title"><a th:href="@{product/{id}(id=${cart.getIdProduct()})}" href="#" th:text="${cart.nameProduct}"></a></td>
                                <td class="pro-rom"><span th:text="${cart.getRom()}"></span></td>
                                <td class="pro-color"><span th:text="${cart.color}"></span></td>
                                <td class="pro-price"><span th:text="${cart.getPriceProductString()}">$295.00</span></td>
                                <td class="pro-quantity">
                                    <div class="pro-qty"><input th:id="'cart' + ${cart.getId()}" type="text" th:value="${cart.getQuantity()}"></div>
                                </td>
                                <td class="pro-subtotal"><span th:text="${cart.getTotalString()}">$295.00</span></td>
                                <td class="pro-remove"><a href="#"><i class="fa fa-trash-o"></i></a></td>
                            </tr>
                        </th:block>
                        </tbody>
                    </table>
                </div>

                <!-- Cart Update Option -->
                <div class="cart-update-option d-block d-md-flex justify-content-between">
                    <div class="apply-coupon-wrapper">
                        <form action="#" method="post" class=" d-block d-md-flex">
                            <input type="text" placeholder="Enter Your Coupon Code" required />
                            <button class="sqr-btn">Apply Coupon</button>
                        </form>
                    </div>
                    <div class="cart-update mt-sm-16">
                        <a href="#" class="sqr-btn">Update Cart</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-5 ml-auto">
                <!-- Cart Calculation Area -->
                <div class="cart-calculator-wrapper">
                    <div class="cart-calculate-items">
                        <h3>Cart Totals</h3>
                        <div class="table-responsive">
                            <table class="table">
                                <tr>
                                    <td>Sub Total</td>
                                    <td>$230</td>
                                </tr>
                                <tr>
                                    <td>Shipping</td>
                                    <td>$70</td>
                                </tr>
                                <tr class="total">
                                    <td>Total</td>
                                    <td class="total-amount">$300</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <a href="checkout.html" class="sqr-btn d-block">Proceed To Checkout</a>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- product details wrapper end -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<!--<script th:src="@{/assets/js/listproduct.js}"></script>-->
<!-- brand area end -->

<script th:inline="javascript">
    let product = [[${product}]];
    console.log(product)
    function changeRom(){
        let colorRom = document.getElementById("color-product-detail");
        while (colorRom.lastElementChild){
            colorRom.removeChild(colorRom.lastElementChild);
        }
        var romId = $("#rom-product-detail").find(":selected").val();

        for (let i = 0; i < product.romRespones.length; i++) {
            if(romId === product.romRespones[i].id){
                for (let j = 0; j < product.romRespones[i].productPropertyRespones.length; j++) {
                    document.getElementById("product-price").innerHTML = product.romRespones[i].productPropertyRespones[0].priceString;
                    colorRom.innerHTML += '<li>\n' +
                        '<a onclick="changeColor( \''+ product.romRespones[i].productPropertyRespones[j].color+  '\' , ' +  product.romRespones[i].id + ')" style="background : '+ product.romRespones[i].productPropertyRespones[j].color + '"  title="' + product.romRespones[i].productPropertyRespones[j].color +' "></a>\n' +
                        '</li>'
                }
            }
        }
    }

    function changeColor(color , idRom){
        console.log(color);
        for (let i = 0; i < product.romRespones.length; i++) {
            if(parseInt(product.romRespones[i].id) === parseInt(idRom)){
                for (let j = 0; j < product.romRespones[i].productPropertyRespones.length; j++) {
                    if(color === product.romRespones[i].productPropertyRespones[j].color){
                        document.getElementById("product-price").innerHTML = product.romRespones[i].productPropertyRespones[j].priceString;
                    }
                }
            }
        }
    }


</script>


</body>
</html>


